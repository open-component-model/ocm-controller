apiVersion: apps/v1
kind: Deployment
metadata:
  name: ocm-controller
  labels:
    control-plane: controller
spec:
  selector:
    matchLabels:
      app: ocm-controller
  template:
    spec:
      containers:
        - name: manager
          image: open-component-model/ocm-controller
          volumeMounts:
            - mountPath: "/etc/ssl/"
              name: "root-certificate"
            - mountPath: "/certs"
              name: "client-certificates"
      volumes:
        - name: "root-certificate"
          secret:
            secretName: "developer-root-certificate"
            items:
              - key: "ca-certificates.crt"
                path: "ca-certificates.crt"
        - name: "client-certificates"
          secret:
            secretName: "registry-certs"
            items:
              - key: "server.pem"
                path: "server.pem"
              - key: "server-key.pem"
                path: "server-key.pem"
